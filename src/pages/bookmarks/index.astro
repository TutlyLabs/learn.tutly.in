---
import RootLayout from "@layouts/RootLayout.astro";
import Page from "./page";
import { createServerCaller } from "@/trpc/server";

const currentUser = Astro.locals.user;
if (!currentUser) return Astro.redirect("/sign-in");

const caller = await createServerCaller(Astro.request);
const bookmarks = await caller.bookmarks.getUserBookmarks();
---

<RootLayout title="Bookmarks">
  <Page bookmarks={bookmarks} client:only="react" />
</RootLayout>
