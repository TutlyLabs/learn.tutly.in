---
import db from "@/lib/db";
import RootLayout from "@/layouts/RootLayout.astro";
import UserCards from "./_components/UserCards";

const user = Astro.locals.user;

if (user?.role !== "INSTRUCTOR") {
  return Astro.redirect(`/404`);
}

const allUsers = await db.user.findMany({});
---

<RootLayout title="Users">
  <UserCards users={allUsers as any} client:load />
</RootLayout>
