---
import RootLayout from "@/layouts/RootLayout.astro";
import { createServerCaller } from "@/trpc/server";
import Page from "./page";

const params = Astro.params;
const { id } = Astro.params;
const currentUser = Astro.locals.user;

const caller = await createServerCaller(Astro.request);
const allUsers = await caller.users.getAllUsers({ courseId: id! });
---

<RootLayout title="Manage Course">
  <Page allUsers={allUsers} params={params} currentUser={currentUser} client:load />
</RootLayout>
